## RDB

* 基于内存快照的持久化方式
* 两种触发方式
  * save，会造成阻塞，不建议使用
  * bgsave，在配置文件中配置，当在m秒中有n次写入会触发，主线程会fork一个子进程去持久化，当然有时候持久化会很久，这个时候主线程会将新来的写操作再同步给子线程
* 有可能会掉数据

## AOF

* 先写内存，后写日志
  	* 原因：redis追求高性能，先写日志会阻塞写操作，并且需要额外的检查
* 需要在配置文件里开启
* 记录数据库的每次写入操作
* 三个配置
  * always:每次写入都写aof
  * everySecond:每秒写入
  * no：先写缓存，由操作系统决定什么将缓存的数据刷回磁盘
* aof的重写
  * 有新数据来了咋办？
    	* 加入配置为always：写入缓冲区以及旧的日志文件，在新的日志文件重写结束后，将缓冲区的数据追加进去

## RDB+AOF

* 在RDB的间隙使用AOF，兼具RDB的性能和AOF的稳健